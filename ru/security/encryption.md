# Шифрование

[[toc]]

## Введение

Сервисы шифрования Goravel предоставляют простой и удобный интерфейс для шифрования и дешифрования текста с помощью OpenSSL с использованием шифрования AES-256. Все зашифрованные значения Goravel подписываются с использованием кода аутентификации сообщения (GMAC), чтобы их базовое значение не могло быть изменено или подделано после шифрования.

## Конфигурация

Перед использованием шифровщика Goravel вы должны установить опцию `key` в файле конфигурации `config/app.go`. Значение этой конфигурации определяется переменной окружения `APP_KEY`. Вы должны использовать команду `go run . artisan key:generate` для генерации значения этой переменной, так как команда `key:generate` будет использовать безопасный генератор случайных байтов Golang для создания криптографически безопасного ключа для вашего приложения.

## Использование шифровщика

### Шифрование значения

Вы можете зашифровать значение с помощью метода `EncryptString`, предоставляемого фасадом `facades.Crypt()`. Все зашифрованные значения шифруются с использованием OpenSSL и шифра AES-256-GCM. Кроме того, все зашифрованные значения подписываются кодом аутентификации сообщения (GMAC). Встроенный код аутентификации сообщения предотвращает дешифрование значений, которые были подделаны злонамеренными пользователями:

```go
secret, err := facades.Crypt().EncryptString("goravel")
```

### Дешифровка значения

Вы можете дешифровать значения с помощью метода `DecryptString`, предоставляемого фасадом `facades.Crypt()`. Если значение не может быть правильно дешифровано, например, если код аутентификации сообщения недействителен, будет возвращена ошибка:

```go
str, err := facades.Crypt().DecryptString(secret)
```

<CommentService/>